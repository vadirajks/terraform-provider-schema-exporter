version: 0
block:
  attributes:
    create_time:
      type: string
      description: Output only. When the Feature resource was created.
      description_kind: plain
      computed: true
    delete_time:
      type: string
      description: Output only. When the Feature resource was deleted.
      description_kind: plain
      computed: true
    effective_labels:
      type:
      - map
      - string
      description: All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.
      description_kind: plain
      computed: true
    id:
      type: string
      description_kind: plain
      optional: true
      computed: true
    labels:
      type:
      - map
      - string
      description: 'GCP labels for this Feature. **Note**: This field is non-authoritative, and will only manage the labels present in your configuration. Please refer to the field ''effective_labels'' for all of the labels present on the resource.'
      description_kind: plain
      optional: true
    location:
      type: string
      description: The location for the resource
      description_kind: plain
      required: true
    name:
      type: string
      description: The full, unique name of this Feature resource
      description_kind: plain
      optional: true
    project:
      type: string
      description_kind: plain
      optional: true
      computed: true
    resource_state:
      type:
      - list
      - - object
        - has_resources: bool
          state: string
      description: State of the Feature resource itself.
      description_kind: plain
      computed: true
    state:
      type:
      - list
      - - object
        - state:
          - list
          - - object
            - code: string
              description: string
              update_time: string
      description: Output only. The Hub-wide Feature state
      description_kind: plain
      computed: true
    terraform_labels:
      type:
      - map
      - string
      description: The combination of labels configured directly on the resource and default labels configured on the provider.
      description_kind: plain
      computed: true
    update_time:
      type: string
      description: Output only. When the Feature resource was last updated.
      description_kind: plain
      computed: true
  block_types:
    fleet_default_member_config:
      nesting_mode: list
      block:
        block_types:
          configmanagement:
            nesting_mode: list
            block:
              attributes:
                management:
                  type: string
                  description: 'Set this field to MANAGEMENT_AUTOMATIC to enable Config Sync auto-upgrades, and set this field to MANAGEMENT_MANUAL or MANAGEMENT_UNSPECIFIED to disable Config Sync auto-upgrades. Possible values: ["MANAGEMENT_UNSPECIFIED", "MANAGEMENT_AUTOMATIC", "MANAGEMENT_MANUAL"]'
                  description_kind: plain
                  optional: true
                version:
                  type: string
                  description: Version of Config Sync installed
                  description_kind: plain
                  optional: true
              block_types:
                config_sync:
                  nesting_mode: list
                  block:
                    attributes:
                      enabled:
                        type: bool
                        description: Enables the installation of ConfigSync. If set to true, ConfigSync resources will be created and the other ConfigSync fields will be applied if exist. If set to false, all other ConfigSync fields will be ignored, ConfigSync resources will be deleted. If omitted, ConfigSync resources will be managed depends on the presence of the git or oci field.
                        description_kind: plain
                        optional: true
                      metrics_gcp_service_account_email:
                        type: string
                        description: The Email of the Google Cloud Service Account (GSA) used for exporting Config Sync metrics to Cloud Monitoring. The GSA should have the Monitoring Metric Writer(roles/monitoring.metricWriter) IAM role. The Kubernetes ServiceAccount 'default' in the namespace 'config-management-monitoring' should be bound to the GSA.
                        description_kind: plain
                        optional: true
                      prevent_drift:
                        type: bool
                        description: Set to true to enable the Config Sync admission webhook to prevent drifts. If set to 'false', disables the Config Sync admission webhook and does not prevent drifts.
                        description_kind: plain
                        optional: true
                      source_format:
                        type: string
                        description: Specifies whether the Config Sync Repo is in hierarchical or unstructured mode
                        description_kind: plain
                        optional: true
                    block_types:
                      git:
                        nesting_mode: list
                        block:
                          attributes:
                            gcp_service_account_email:
                              type: string
                              description: The Google Cloud Service Account Email used for auth when secretType is gcpServiceAccount
                              description_kind: plain
                              optional: true
                            https_proxy:
                              type: string
                              description: URL for the HTTPS Proxy to be used when communicating with the Git repo
                              description_kind: plain
                              optional: true
                            policy_dir:
                              type: string
                              description: The path within the Git repository that represents the top level of the repo to sync
                              description_kind: plain
                              optional: true
                            secret_type:
                              type: string
                              description: Type of secret configured for access to the Git repo
                              description_kind: plain
                              required: true
                            sync_branch:
                              type: string
                              description: 'The branch of the repository to sync from. Default: master'
                              description_kind: plain
                              optional: true
                            sync_repo:
                              type: string
                              description: The URL of the Git repository to use as the source of truth
                              description_kind: plain
                              optional: true
                            sync_rev:
                              type: string
                              description: Git revision (tag or hash) to check out. Default HEAD
                              description_kind: plain
                              optional: true
                            sync_wait_secs:
                              type: string
                              description: 'Period in seconds between consecutive syncs. Default: 15'
                              description_kind: plain
                              optional: true
                          description: Git repo configuration for the cluster
                          description_kind: plain
                        max_items: 1
                      oci:
                        nesting_mode: list
                        block:
                          attributes:
                            gcp_service_account_email:
                              type: string
                              description: The Google Cloud Service Account Email used for auth when secretType is gcpServiceAccount
                              description_kind: plain
                              optional: true
                            policy_dir:
                              type: string
                              description: 'The absolute path of the directory that contains the local resources. Default: the root directory of the image'
                              description_kind: plain
                              optional: true
                            secret_type:
                              type: string
                              description: Type of secret configured for access to the Git repo
                              description_kind: plain
                              required: true
                            sync_repo:
                              type: string
                              description: The OCI image repository URL for the package to sync from
                              description_kind: plain
                              optional: true
                            sync_wait_secs:
                              type: string
                              description: 'Period in seconds between consecutive syncs. Default: 15'
                              description_kind: plain
                              optional: true
                            version:
                              type: string
                              description: Version of Config Sync installed
                              description_kind: plain
                              deprecated: true
                              optional: true
                          description: OCI repo configuration for the cluster
                          description_kind: plain
                        max_items: 1
                    description: ConfigSync configuration for the cluster
                    description_kind: plain
                  max_items: 1
              description: Config Management spec
              description_kind: plain
            max_items: 1
          mesh:
            nesting_mode: list
            block:
              attributes:
                management:
                  type: string
                  description: 'Whether to automatically manage Service Mesh Possible values: ["MANAGEMENT_UNSPECIFIED", "MANAGEMENT_AUTOMATIC", "MANAGEMENT_MANUAL"]'
                  description_kind: plain
                  required: true
              description: Service Mesh spec
              description_kind: plain
            max_items: 1
          policycontroller:
            nesting_mode: list
            block:
              attributes:
                version:
                  type: string
                  description: Configures the version of Policy Controller
                  description_kind: plain
                  optional: true
                  computed: true
              block_types:
                policy_controller_hub_config:
                  nesting_mode: list
                  block:
                    attributes:
                      audit_interval_seconds:
                        type: number
                        description: Interval for Policy Controller Audit scans (in seconds). When set to 0, this disables audit functionality altogether.
                        description_kind: plain
                        optional: true
                      constraint_violation_limit:
                        type: number
                        description: The maximum number of audit violations to be stored in a constraint. If not set, the internal default of 20 will be used.
                        description_kind: plain
                        optional: true
                      exemptable_namespaces:
                        type:
                        - list
                        - string
                        description: The set of namespaces that are excluded from Policy Controller checks. Namespaces do not need to currently exist on the cluster.
                        description_kind: plain
                        optional: true
                      install_spec:
                        type: string
                        description: 'Configures the mode of the Policy Controller installation Possible values: ["INSTALL_SPEC_UNSPECIFIED", "INSTALL_SPEC_NOT_INSTALLED", "INSTALL_SPEC_ENABLED", "INSTALL_SPEC_SUSPENDED", "INSTALL_SPEC_DETACHED"]'
                        description_kind: plain
                        required: true
                      log_denies_enabled:
                        type: bool
                        description: Logs all denies and dry run failures.
                        description_kind: plain
                        optional: true
                      mutation_enabled:
                        type: bool
                        description: Enables the ability to mutate resources using Policy Controller.
                        description_kind: plain
                        optional: true
                      referential_rules_enabled:
                        type: bool
                        description: Enables the ability to use Constraint Templates that reference to objects other than the object currently being evaluated.
                        description_kind: plain
                        optional: true
                    block_types:
                      deployment_configs:
                        nesting_mode: set
                        block:
                          attributes:
                            component:
                              type: string
                              description_kind: plain
                              required: true
                            pod_affinity:
                              type: string
                              description: 'Pod affinity configuration. Possible values: ["AFFINITY_UNSPECIFIED", "NO_AFFINITY", "ANTI_AFFINITY"]'
                              description_kind: plain
                              optional: true
                              computed: true
                            replica_count:
                              type: number
                              description: Pod replica count.
                              description_kind: plain
                              optional: true
                              computed: true
                          block_types:
                            container_resources:
                              nesting_mode: list
                              block:
                                block_types:
                                  limits:
                                    nesting_mode: list
                                    block:
                                      attributes:
                                        cpu:
                                          type: string
                                          description: CPU requirement expressed in Kubernetes resource units.
                                          description_kind: plain
                                          optional: true
                                        memory:
                                          type: string
                                          description: Memory requirement expressed in Kubernetes resource units.
                                          description_kind: plain
                                          optional: true
                                      description: Limits describes the maximum amount of compute resources allowed for use by the running container.
                                      description_kind: plain
                                    max_items: 1
                                  requests:
                                    nesting_mode: list
                                    block:
                                      attributes:
                                        cpu:
                                          type: string
                                          description: CPU requirement expressed in Kubernetes resource units.
                                          description_kind: plain
                                          optional: true
                                        memory:
                                          type: string
                                          description: Memory requirement expressed in Kubernetes resource units.
                                          description_kind: plain
                                          optional: true
                                      description: Requests describes the amount of compute resources reserved for the container by the kube-scheduler.
                                      description_kind: plain
                                    max_items: 1
                                description: Container resource requirements.
                                description_kind: plain
                              max_items: 1
                            pod_toleration:
                              nesting_mode: list
                              block:
                                attributes:
                                  effect:
                                    type: string
                                    description: Matches a taint effect.
                                    description_kind: plain
                                    optional: true
                                  key:
                                    type: string
                                    description: Matches a taint key (not necessarily unique).
                                    description_kind: plain
                                    optional: true
                                  operator:
                                    type: string
                                    description: Matches a taint operator.
                                    description_kind: plain
                                    optional: true
                                  value:
                                    type: string
                                    description: Matches a taint value.
                                    description_kind: plain
                                    optional: true
                                description: Pod tolerations of node taints.
                                description_kind: plain
                          description: Map of deployment configs to deployments ("admission", "audit", "mutation").
                          description_kind: plain
                      monitoring:
                        nesting_mode: list
                        block:
                          attributes:
                            backends:
                              type:
                              - list
                              - string
                              description: 'Specifies the list of backends Policy Controller will export to. An empty list would effectively disable metrics export. Possible values: ["MONITORING_BACKEND_UNSPECIFIED", "PROMETHEUS", "CLOUD_MONITORING"]'
                              description_kind: plain
                              optional: true
                              computed: true
                          description: Monitoring specifies the configuration of monitoring Policy Controller.
                          description_kind: plain
                        max_items: 1
                      policy_content:
                        nesting_mode: list
                        block:
                          block_types:
                            bundles:
                              nesting_mode: set
                              block:
                                attributes:
                                  bundle:
                                    type: string
                                    description_kind: plain
                                    required: true
                                  exempted_namespaces:
                                    type:
                                    - list
                                    - string
                                    description: The set of namespaces to be exempted from the bundle.
                                    description_kind: plain
                                    optional: true
                                description: Configures which bundles to install and their corresponding install specs.
                                description_kind: plain
                            template_library:
                              nesting_mode: list
                              block:
                                attributes:
                                  installation:
                                    type: string
                                    description: 'Configures the manner in which the template library is installed on the cluster. Possible values: ["INSTALLATION_UNSPECIFIED", "NOT_INSTALLED", "ALL"]'
                                    description_kind: plain
                                    optional: true
                                description: Configures the installation of the Template Library.
                                description_kind: plain
                              max_items: 1
                          description: Specifies the desired policy content on the cluster.
                          description_kind: plain
                        max_items: 1
                    description: Configuration of Policy Controller
                    description_kind: plain
                  min_items: 1
                  max_items: 1
              description: Policy Controller spec
              description_kind: plain
            max_items: 1
        description: Optional. Fleet Default Membership Configuration.
        description_kind: plain
      max_items: 1
    spec:
      nesting_mode: list
      block:
        block_types:
          clusterupgrade:
            nesting_mode: list
            block:
              attributes:
                upstream_fleets:
                  type:
                  - list
                  - string
                  description: Specified if other fleet should be considered as a source of upgrades. Currently, at most one upstream fleet is allowed. The fleet name should be either fleet project number or id.
                  description_kind: plain
                  required: true
              block_types:
                gke_upgrade_overrides:
                  nesting_mode: list
                  block:
                    block_types:
                      post_conditions:
                        nesting_mode: list
                        block:
                          attributes:
                            soaking:
                              type: string
                              description: Amount of time to "soak" after a rollout has been finished before marking it COMPLETE. Cannot exceed 30 days.
                              description_kind: plain
                              required: true
                          description: Post conditions to override for the specified upgrade.
                          description_kind: plain
                        min_items: 1
                        max_items: 1
                      upgrade:
                        nesting_mode: list
                        block:
                          attributes:
                            name:
                              type: string
                              description: Name of the upgrade, e.g., "k8s_control_plane". It should be a valid upgrade name. It must not exceet 99 characters.
                              description_kind: plain
                              required: true
                            version:
                              type: string
                              description: Version of the upgrade, e.g., "1.22.1-gke.100". It should be a valid version. It must not exceet 99 characters.
                              description_kind: plain
                              required: true
                          description: Which upgrade to override.
                          description_kind: plain
                        min_items: 1
                        max_items: 1
                    description: Configuration overrides for individual upgrades.
                    description_kind: plain
                post_conditions:
                  nesting_mode: list
                  block:
                    attributes:
                      soaking:
                        type: string
                        description: Amount of time to "soak" after a rollout has been finished before marking it COMPLETE. Cannot exceed 30 days.
                        description_kind: plain
                        required: true
                    description: Post conditions to override for the specified upgrade.
                    description_kind: plain
                  max_items: 1
              description: Clusterupgrade feature spec.
              description_kind: plain
            max_items: 1
          fleetobservability:
            nesting_mode: list
            block:
              block_types:
                logging_config:
                  nesting_mode: list
                  block:
                    block_types:
                      default_config:
                        nesting_mode: list
                        block:
                          attributes:
                            mode:
                              type: string
                              description: 'Specified if fleet logging feature is enabled. Possible values: ["MODE_UNSPECIFIED", "COPY", "MOVE"]'
                              description_kind: plain
                              optional: true
                          description: Specified if applying the default routing config to logs not specified in other configs.
                          description_kind: plain
                        max_items: 1
                      fleet_scope_logs_config:
                        nesting_mode: list
                        block:
                          attributes:
                            mode:
                              type: string
                              description: 'Specified if fleet logging feature is enabled. Possible values: ["MODE_UNSPECIFIED", "COPY", "MOVE"]'
                              description_kind: plain
                              optional: true
                          description: Specified if applying the routing config to all logs for all fleet scopes.
                          description_kind: plain
                        max_items: 1
                    description: Specified if fleet logging feature is enabled for the entire fleet. If UNSPECIFIED, fleet logging feature is disabled for the entire fleet.
                    description_kind: plain
                  max_items: 1
              description: Fleet Observability feature spec.
              description_kind: plain
            max_items: 1
          multiclusteringress:
            nesting_mode: list
            block:
              attributes:
                config_membership:
                  type: string
                  description: 'Fully-qualified Membership name which hosts the MultiClusterIngress CRD. Example: ''projects/foo-proj/locations/global/memberships/bar'''
                  description_kind: plain
                  required: true
              description: Multicluster Ingress-specific spec.
              description_kind: plain
            max_items: 1
          rbacrolebindingactuation:
            nesting_mode: list
            block:
              attributes:
                allowed_custom_roles:
                  type:
                  - list
                  - string
                  description: The list of allowed custom roles (ClusterRoles). If a custom role is not part of this list, it cannot be used in a fleet scope RBACRoleBinding. If a custom role in this list is in use, it cannot be removed from the list until the scope RBACRolebindings using it are deleted.
                  description_kind: plain
                  optional: true
              description: RBACRolebinding Actuation feature spec.
              description_kind: plain
            max_items: 1
        description: Optional. Hub-wide Feature configuration. If this Feature does not support any Hub-wide configuration, this field may be unused.
        description_kind: plain
      max_items: 1
    timeouts:
      nesting_mode: single
      block:
        attributes:
          create:
            type: string
            description_kind: plain
            optional: true
          delete:
            type: string
            description_kind: plain
            optional: true
          update:
            type: string
            description_kind: plain
            optional: true
        description_kind: plain
  description_kind: plain
