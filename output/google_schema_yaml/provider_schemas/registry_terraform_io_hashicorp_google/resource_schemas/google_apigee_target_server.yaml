version: 0
block:
  attributes:
    description:
      type: string
      description: A human-readable description of this TargetServer.
      description_kind: plain
      optional: true
    env_id:
      type: string
      description: The Apigee environment group associated with the Apigee environment, in the format 'organizations/{{org_name}}/environments/{{env_name}}'.
      description_kind: plain
      required: true
    host:
      type: string
      description: The host name this target connects to. Value must be a valid hostname as described by RFC-1123.
      description_kind: plain
      required: true
    id:
      type: string
      description_kind: plain
      optional: true
      computed: true
    is_enabled:
      type: bool
      description: Enabling/disabling a TargetServer is useful when TargetServers are used in load balancing configurations, and one or more TargetServers need to taken out of rotation periodically. Defaults to true.
      description_kind: plain
      optional: true
    name:
      type: string
      description: The resource id of this reference. Values must match the regular expression [\w\s-.]+.
      description_kind: plain
      required: true
    port:
      type: number
      description: The port number this target connects to on the given host. Value must be between 1 and 65535, inclusive.
      description_kind: plain
      required: true
    protocol:
      type: string
      description: 'Immutable. The protocol used by this TargetServer. Possible values: ["HTTP", "HTTP2", "GRPC_TARGET", "GRPC", "EXTERNAL_CALLOUT"]'
      description_kind: plain
      optional: true
      computed: true
  block_types:
    s_sl_info:
      nesting_mode: list
      block:
        attributes:
          ciphers:
            type:
            - list
            - string
            description: 'The SSL/TLS cipher suites to be used. For programmable proxies, it must be one of the cipher suite names listed in: http://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html#ciphersuites. For configurable proxies, it must follow the configuration specified in: https://commondatastorage.googleapis.com/chromium-boringssl-docs/ssl.h.html#Cipher-suite-configuration. This setting has no effect for configurable proxies when negotiating TLS 1.3.'
            description_kind: plain
            optional: true
          client_auth_enabled:
            type: bool
            description: Enables two-way TLS.
            description_kind: plain
            optional: true
          enabled:
            type: bool
            description: Enables TLS. If false, neither one-way nor two-way TLS will be enabled.
            description_kind: plain
            required: true
          enforce:
            type: bool
            description: If true, TLS is strictly enforced.
            description_kind: plain
            optional: true
          ignore_validation_errors:
            type: bool
            description: If true, Edge ignores TLS certificate errors. Valid when configuring TLS for target servers and target endpoints, and when configuring virtual hosts that use 2-way TLS. When used with a target endpoint/target server, if the backend system uses SNI and returns a cert with a subject Distinguished Name (DN) that does not match the hostname, there is no way to ignore the error and the connection fails.
            description_kind: plain
            optional: true
          key_alias:
            type: string
            description: Required if clientAuthEnabled is true. The resource ID for the alias containing the private key and cert.
            description_kind: plain
            optional: true
          key_store:
            type: string
            description: Required if clientAuthEnabled is true. The resource ID of the keystore.
            description_kind: plain
            optional: true
          protocols:
            type:
            - list
            - string
            description: The TLS versioins to be used.
            description_kind: plain
            optional: true
          trust_store:
            type: string
            description: The resource ID of the truststore.
            description_kind: plain
            optional: true
        block_types:
          common_name:
            nesting_mode: list
            block:
              attributes:
                value:
                  type: string
                  description: The TLS Common Name string of the certificate.
                  description_kind: plain
                  optional: true
                wildcard_match:
                  type: bool
                  description: Indicates whether the cert should be matched against as a wildcard cert.
                  description_kind: plain
                  optional: true
              description: The TLS Common Name of the certificate.
              description_kind: plain
            max_items: 1
        description: Specifies TLS configuration info for this TargetServer. The JSON name is sSLInfo for legacy/backwards compatibility reasons -- Edge originally supported SSL, and the name is still used for TLS configuration.
        description_kind: plain
      max_items: 1
    timeouts:
      nesting_mode: single
      block:
        attributes:
          create:
            type: string
            description_kind: plain
            optional: true
          delete:
            type: string
            description_kind: plain
            optional: true
          update:
            type: string
            description_kind: plain
            optional: true
        description_kind: plain
  description_kind: plain
