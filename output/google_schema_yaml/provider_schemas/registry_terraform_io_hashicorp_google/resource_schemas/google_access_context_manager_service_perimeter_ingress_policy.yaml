version: 0
block:
  attributes:
    access_policy_id:
      type: string
      description: The name of the Access Policy this resource belongs to.
      description_kind: plain
      computed: true
    etag:
      type: string
      description: The perimeter etag is internally used to prevent overwriting the list of policies on PATCH calls. It is retrieved from the same GET perimeter API call that's used to get the current list of policies. The policy defined in this resource is added or removed from that list, and then this etag is sent with the PATCH call along with the updated policies.
      description_kind: plain
      computed: true
    id:
      type: string
      description_kind: plain
      optional: true
      computed: true
    perimeter:
      type: string
      description: The name of the Service Perimeter to add this resource to.
      description_kind: plain
      required: true
    title:
      type: string
      description: Human readable title. Must be unique within the perimeter. Does not affect behavior.
      description_kind: plain
      optional: true
  block_types:
    ingress_from:
      nesting_mode: list
      block:
        attributes:
          identities:
            type:
            - list
            - string
            description: Identities can be an individual user, service account, Google group, or third-party identity. For third-party identity, only single identities are supported and other identity types are not supported.The v1 identities that have the prefix user, group and serviceAccount in https://cloud.google.com/iam/docs/principal-identifiers#v1 are supported.
            description_kind: plain
            optional: true
          identity_type:
            type: string
            description: 'Specifies the type of identities that are allowed access from outside the perimeter. If left unspecified, then members of ''identities'' field will be allowed access. Possible values: ["ANY_IDENTITY", "ANY_USER_ACCOUNT", "ANY_SERVICE_ACCOUNT"]'
            description_kind: plain
            optional: true
        block_types:
          sources:
            nesting_mode: list
            block:
              attributes:
                access_level:
                  type: string
                  description: An 'AccessLevel' resource name that allow resources within the 'ServicePerimeters' to be accessed from the internet. 'AccessLevels' listed must be in the same policy as this 'ServicePerimeter'. Referencing a nonexistent 'AccessLevel' will cause an error. If no 'AccessLevel' names are listed, resources within the perimeter can only be accessed via Google Cloud calls with request origins within the perimeter. Example 'accessPolicies/MY_POLICY/accessLevels/MY_LEVEL.' If * is specified, then all IngressSources will be allowed.
                  description_kind: plain
                  optional: true
                resource:
                  type: string
                  description: 'A Google Cloud resource that is allowed to ingress the perimeter. Requests from these resources will be allowed to access perimeter data. Currently only projects and VPCs are allowed. Project format: ''projects/{projectNumber}'' VPC network format: ''//compute.googleapis.com/projects/{PROJECT_ID}/global/networks/{NAME}''. The project may be in any Google Cloud organization, not just the organization that the perimeter is defined in. ''*'' is not allowed, the case of allowing all Google Cloud resources only is not supported.'
                  description_kind: plain
                  optional: true
              description: Sources that this 'IngressPolicy' authorizes access from.
              description_kind: plain
        description: Defines the conditions on the source of a request causing this 'IngressPolicy' to apply.
        description_kind: plain
      max_items: 1
    ingress_to:
      nesting_mode: list
      block:
        attributes:
          resources:
            type:
            - list
            - string
            description: A list of resources, currently only projects in the form 'projects/<projectnumber>', protected by this 'ServicePerimeter' that are allowed to be accessed by sources defined in the corresponding 'IngressFrom'. A request matches if it contains a resource in this list. If '*' is specified for resources, then this 'IngressTo' rule will authorize access to all resources inside the perimeter, provided that the request also matches the 'operations' field.
            description_kind: plain
            optional: true
          roles:
            type:
            - list
            - string
            description: A list of IAM roles that represent the set of operations that the sources specified in the corresponding 'IngressFrom' are allowed to perform.
            description_kind: plain
            optional: true
        block_types:
          operations:
            nesting_mode: list
            block:
              attributes:
                service_name:
                  type: string
                  description: The name of the API whose methods or permissions the 'IngressPolicy' or 'EgressPolicy' want to allow. A single 'ApiOperation' with 'serviceName' field set to '*' will allow all methods AND permissions for all services.
                  description_kind: plain
                  optional: true
              block_types:
                method_selectors:
                  nesting_mode: list
                  block:
                    attributes:
                      method:
                        type: string
                        description: Value for method should be a valid method name for the corresponding serviceName in 'ApiOperation'. If '*' used as value for 'method', then ALL methods and permissions are allowed.
                        description_kind: plain
                        optional: true
                      permission:
                        type: string
                        description: Value for permission should be a valid Cloud IAM permission for the corresponding 'serviceName' in 'ApiOperation'.
                        description_kind: plain
                        optional: true
                    description: API methods or permissions to allow. Method or permission must belong to the service specified by serviceName field. A single 'MethodSelector' entry with '*' specified for the method field will allow all methods AND permissions for the service specified in 'serviceName'.
                    description_kind: plain
              description: A list of 'ApiOperations' the sources specified in corresponding 'IngressFrom' are allowed to perform in this 'ServicePerimeter'.
              description_kind: plain
        description: Defines the conditions on the 'ApiOperation' and request destination that cause this 'IngressPolicy' to apply.
        description_kind: plain
      max_items: 1
    timeouts:
      nesting_mode: single
      block:
        attributes:
          create:
            type: string
            description_kind: plain
            optional: true
          delete:
            type: string
            description_kind: plain
            optional: true
        description_kind: plain
  description_kind: plain
