version: 0
block:
  attributes:
    cluster:
      type: string
      description: The source cluster from which Backups will be created via this BackupPlan.
      description_kind: plain
      required: true
    deactivated:
      type: bool
      description: This flag indicates whether this BackupPlan has been deactivated. Setting this field to True locks the BackupPlan such that no further updates will be allowed (except deletes), including the deactivated field itself. It also prevents any new Backups from being created via this BackupPlan (including scheduled Backups).
      description_kind: plain
      optional: true
      computed: true
    description:
      type: string
      description: User specified descriptive string for this BackupPlan.
      description_kind: plain
      optional: true
    effective_labels:
      type:
      - map
      - string
      description: All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.
      description_kind: plain
      computed: true
    etag:
      type: string
      description: 'etag is used for optimistic concurrency control as a way to help prevent simultaneous updates of a backup plan from overwriting each other. It is strongly suggested that systems make use of the ''etag'' in the read-modify-write cycle to perform BackupPlan updates in order to avoid race conditions: An etag is returned in the response to backupPlans.get, and systems are expected to put that etag in the request to backupPlans.patch or backupPlans.delete to ensure that their change will be applied to the same version of the resource.'
      description_kind: plain
      computed: true
    id:
      type: string
      description_kind: plain
      optional: true
      computed: true
    labels:
      type:
      - map
      - string
      description: 'Description: A set of custom labels supplied by the user. A list of key->value pairs. Example: { "name": "wrench", "mass": "1.3kg", "count": "3" }. **Note**: This field is non-authoritative, and will only manage the labels present in your configuration. Please refer to the field ''effective_labels'' for all of the labels present on the resource.'
      description_kind: plain
      optional: true
    location:
      type: string
      description: The region of the Backup Plan.
      description_kind: plain
      required: true
    name:
      type: string
      description: The full name of the BackupPlan Resource.
      description_kind: plain
      required: true
    project:
      type: string
      description_kind: plain
      optional: true
      computed: true
    protected_pod_count:
      type: number
      description: The number of Kubernetes Pods backed up in the last successful Backup created via this BackupPlan.
      description_kind: plain
      computed: true
    state:
      type: string
      description: The State of the BackupPlan.
      description_kind: plain
      computed: true
    state_reason:
      type: string
      description: Detailed description of why BackupPlan is in its current state.
      description_kind: plain
      computed: true
    terraform_labels:
      type:
      - map
      - string
      description: The combination of labels configured directly on the resource and default labels configured on the provider.
      description_kind: plain
      computed: true
    uid:
      type: string
      description: Server generated, unique identifier of UUID format.
      description_kind: plain
      computed: true
  block_types:
    backup_config:
      nesting_mode: list
      block:
        attributes:
          all_namespaces:
            type: bool
            description: If True, include all namespaced resources.
            description_kind: plain
            optional: true
          include_secrets:
            type: bool
            description: This flag specifies whether Kubernetes Secret resources should be included when they fall into the scope of Backups.
            description_kind: plain
            optional: true
            computed: true
          include_volume_data:
            type: bool
            description: This flag specifies whether volume data should be backed up when PVCs are included in the scope of a Backup.
            description_kind: plain
            optional: true
            computed: true
          permissive_mode:
            type: bool
            description: This flag specifies whether Backups will not fail when Backup for GKE detects Kubernetes configuration that is non-standard or requires additional setup to restore.
            description_kind: plain
            optional: true
        block_types:
          encryption_key:
            nesting_mode: list
            block:
              attributes:
                gcp_kms_encryption_key:
                  type: string
                  description: 'Google Cloud KMS encryption key. Format: projects/*/locations/*/keyRings/*/cryptoKeys/*'
                  description_kind: plain
                  required: true
              description: This defines a customer managed encryption key that will be used to encrypt the "config" portion (the Kubernetes resources) of Backups created via this plan.
              description_kind: plain
            max_items: 1
          selected_applications:
            nesting_mode: list
            block:
              block_types:
                namespaced_names:
                  nesting_mode: list
                  block:
                    attributes:
                      name:
                        type: string
                        description: The name of a Kubernetes Resource.
                        description_kind: plain
                        required: true
                      namespace:
                        type: string
                        description: The namespace of a Kubernetes Resource.
                        description_kind: plain
                        required: true
                    description: A list of namespaced Kubernetes resources.
                    description_kind: plain
                  min_items: 1
              description: A list of namespaced Kubernetes Resources.
              description_kind: plain
            max_items: 1
          selected_namespace_labels:
            nesting_mode: list
            block:
              block_types:
                resource_labels:
                  nesting_mode: list
                  block:
                    attributes:
                      key:
                        type: string
                        description: The key of the kubernetes label.
                        description_kind: plain
                        required: true
                      value:
                        type: string
                        description: The value of the Label.
                        description_kind: plain
                        required: true
                    description: A list of Kubernetes Namespace labels.
                    description_kind: plain
                  min_items: 1
              description: If set, include just the resources in the listed namespace Labels.
              description_kind: plain
            max_items: 1
          selected_namespaces:
            nesting_mode: list
            block:
              attributes:
                namespaces:
                  type:
                  - list
                  - string
                  description: A list of Kubernetes Namespaces.
                  description_kind: plain
                  required: true
              description: If set, include just the resources in the listed namespaces.
              description_kind: plain
            max_items: 1
        description: Defines the configuration of Backups created via this BackupPlan.
        description_kind: plain
      max_items: 1
    backup_schedule:
      nesting_mode: list
      block:
        attributes:
          cron_schedule:
            type: string
            description: A standard cron string that defines a repeating schedule for creating Backups via this BackupPlan. This is mutually exclusive with the rpoConfig field since at most one schedule can be defined for a BackupPlan. If this is defined, then backupRetainDays must also be defined.
            description_kind: plain
            optional: true
          paused:
            type: bool
            description: This flag denotes whether automatic Backup creation is paused for this BackupPlan.
            description_kind: plain
            optional: true
            computed: true
        block_types:
          rpo_config:
            nesting_mode: list
            block:
              attributes:
                target_rpo_minutes:
                  type: number
                  description: Defines the target RPO for the BackupPlan in minutes, which means the target maximum data loss in time that is acceptable for this BackupPlan. This must be at least 60, i.e., 1 hour, and at most 86400, i.e., 60 days.
                  description_kind: plain
                  required: true
              block_types:
                exclusion_windows:
                  nesting_mode: list
                  block:
                    attributes:
                      daily:
                        type: bool
                        description: The exclusion window occurs every day if set to "True". Specifying this field to "False" is an error. Only one of singleOccurrenceDate, daily and daysOfWeek may be set.
                        description_kind: plain
                        optional: true
                      duration:
                        type: string
                        description: 'Specifies duration of the window in seconds with up to nine fractional digits, terminated by ''s''. Example: "3.5s". Restrictions for duration based on the recurrence type to allow some time for backup to happen: - single_occurrence_date:  no restriction - daily window: duration < 24 hours - weekly window: - days of week includes all seven days of a week: duration < 24 hours - all other weekly window: duration < 168 hours (i.e., 24 * 7 hours)'
                        description_kind: plain
                        required: true
                    block_types:
                      days_of_week:
                        nesting_mode: list
                        block:
                          attributes:
                            days_of_week:
                              type:
                              - list
                              - string
                              description: 'A list of days of week. Possible values: ["MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY", "SATURDAY", "SUNDAY"]'
                              description_kind: plain
                              optional: true
                          description: The exclusion window occurs on these days of each week in UTC. Only one of singleOccurrenceDate, daily and daysOfWeek may be set.
                          description_kind: plain
                        max_items: 1
                      single_occurrence_date:
                        nesting_mode: list
                        block:
                          attributes:
                            day:
                              type: number
                              description: Day of a month.
                              description_kind: plain
                              optional: true
                            month:
                              type: number
                              description: Month of a year.
                              description_kind: plain
                              optional: true
                            year:
                              type: number
                              description: Year of the date.
                              description_kind: plain
                              optional: true
                          description: No recurrence. The exclusion window occurs only once and on this date in UTC. Only one of singleOccurrenceDate, daily and daysOfWeek may be set.
                          description_kind: plain
                        max_items: 1
                      start_time:
                        nesting_mode: list
                        block:
                          attributes:
                            hours:
                              type: number
                              description: Hours of day in 24 hour format.
                              description_kind: plain
                              optional: true
                            minutes:
                              type: number
                              description: Minutes of hour of day.
                              description_kind: plain
                              optional: true
                            nanos:
                              type: number
                              description: Fractions of seconds in nanoseconds.
                              description_kind: plain
                              optional: true
                            seconds:
                              type: number
                              description: Seconds of minutes of the time.
                              description_kind: plain
                              optional: true
                          description: Specifies the start time of the window using time of the day in UTC.
                          description_kind: plain
                        min_items: 1
                        max_items: 1
                    description: 'User specified time windows during which backup can NOT happen for this BackupPlan. Backups should start and finish outside of any given exclusion window. Note: backup jobs will be scheduled to start and finish outside the duration of the window as much as possible, but running jobs will not get canceled when it runs into the window. All the time and date values in exclusionWindows entry in the API are in UTC. We only allow <=1 recurrence (daily or weekly) exclusion window for a BackupPlan while no restriction on number of single occurrence windows.'
                    description_kind: plain
              description: Defines the RPO schedule configuration for this BackupPlan. This is mutually exclusive with the cronSchedule field since at most one schedule can be defined for a BackupPLan. If this is defined, then backupRetainDays must also be defined.
              description_kind: plain
            max_items: 1
        description: Defines a schedule for automatic Backup creation via this BackupPlan.
        description_kind: plain
      max_items: 1
    retention_policy:
      nesting_mode: list
      block:
        attributes:
          backup_delete_lock_days:
            type: number
            description: Minimum age for a Backup created via this BackupPlan (in days). Must be an integer value between 0-90 (inclusive). A Backup created under this BackupPlan will not be deletable until it reaches Backup's (create time + backup_delete_lock_days). Updating this field of a BackupPlan does not affect existing Backups. Backups created after a successful update will inherit this new value.
            description_kind: plain
            optional: true
            computed: true
          backup_retain_days:
            type: number
            description: 'The default maximum age of a Backup created via this BackupPlan. This field MUST be an integer value >= 0 and <= 365. If specified, a Backup created under this BackupPlan will be automatically deleted after its age reaches (createTime + backupRetainDays). If not specified, Backups created under this BackupPlan will NOT be subject to automatic deletion. Updating this field does NOT affect existing Backups under it. Backups created AFTER a successful update will automatically pick up the new value. NOTE: backupRetainDays must be >= backupDeleteLockDays. If cronSchedule is defined, then this must be <= 360 * the creation interval. If rpo_config is defined, then this must be <= 360 * targetRpoMinutes/(1440minutes/day)'
            description_kind: plain
            optional: true
            computed: true
          locked:
            type: bool
            description: This flag denotes whether the retention policy of this BackupPlan is locked. If set to True, no further update is allowed on this policy, including the locked field itself.
            description_kind: plain
            optional: true
            computed: true
        description: RetentionPolicy governs lifecycle of Backups created under this plan.
        description_kind: plain
      max_items: 1
    timeouts:
      nesting_mode: single
      block:
        attributes:
          create:
            type: string
            description_kind: plain
            optional: true
          delete:
            type: string
            description_kind: plain
            optional: true
          update:
            type: string
            description_kind: plain
            optional: true
        description_kind: plain
  description_kind: plain
