version: 0
block:
  attributes:
    effective_labels:
      type:
      - map
      - string
      description: All of labels (key/value pairs) present on the resource in GCP, including the labels configured through Terraform, other clients and services.
      description_kind: plain
      computed: true
    id:
      type: string
      description_kind: plain
      optional: true
      computed: true
    kms_key_name:
      type: string
      description: The resource name of the Cloud KMS CryptoKey to be used to protect access to messages published on this topic. Your project's PubSub service account ('service-{{PROJECT_NUMBER}}@gcp-sa-pubsub.iam.gserviceaccount.com') must have 'roles/cloudkms.cryptoKeyEncrypterDecrypter' to use this feature. The expected format is 'projects/*/locations/*/keyRings/*/cryptoKeys/*'
      description_kind: plain
      optional: true
    labels:
      type:
      - map
      - string
      description: 'A set of key/value label pairs to assign to this Topic. **Note**: This field is non-authoritative, and will only manage the labels present in your configuration. Please refer to the field ''effective_labels'' for all of the labels present on the resource.'
      description_kind: plain
      optional: true
    message_retention_duration:
      type: string
      description: Indicates the minimum duration to retain a message after it is published to the topic. If this field is set, messages published to the topic in the last messageRetentionDuration are always available to subscribers. For instance, it allows any attached subscription to seek to a timestamp that is up to messageRetentionDuration in the past. If this field is not set, message retention is controlled by settings on individual subscriptions. The rotation period has the format of a decimal number, followed by the letter 's' (seconds). Cannot be more than 31 days or less than 10 minutes.
      description_kind: plain
      optional: true
    name:
      type: string
      description: Name of the topic.
      description_kind: plain
      required: true
    project:
      type: string
      description_kind: plain
      optional: true
      computed: true
    tags:
      type:
      - map
      - string
      description: Input only. Resource manager tags to be bound to the topic. Tag keys and values have the same definition as resource manager tags. Keys must be in the format tagKeys/{tag_key_id}, and values are in the format tagValues/456. The field is ignored when empty. The field is immutable and causes resource replacement when mutated. This field is only set at create time and modifying this field after creation will trigger recreation. To apply tags to an existing resource, see the 'google_tags_tag_value' resource.
      description_kind: plain
      optional: true
    terraform_labels:
      type:
      - map
      - string
      description: The combination of labels configured directly on the resource and default labels configured on the provider.
      description_kind: plain
      computed: true
  block_types:
    ingestion_data_source_settings:
      nesting_mode: list
      block:
        block_types:
          aws_kinesis:
            nesting_mode: list
            block:
              attributes:
                aws_role_arn:
                  type: string
                  description: AWS role ARN to be used for Federated Identity authentication with Kinesis. Check the Pub/Sub docs for how to set up this role and the required permissions that need to be attached to it.
                  description_kind: plain
                  required: true
                consumer_arn:
                  type: string
                  description: The Kinesis consumer ARN to used for ingestion in Enhanced Fan-Out mode. The consumer must be already created and ready to be used.
                  description_kind: plain
                  required: true
                gcp_service_account:
                  type: string
                  description: The GCP service account to be used for Federated Identity authentication with Kinesis (via a 'AssumeRoleWithWebIdentity' call for the provided role). The 'awsRoleArn' must be set up with 'accounts.google.com:sub' equals to this service account number.
                  description_kind: plain
                  required: true
                stream_arn:
                  type: string
                  description: The Kinesis stream ARN to ingest data from.
                  description_kind: plain
                  required: true
              description: Settings for ingestion from Amazon Kinesis Data Streams.
              description_kind: plain
            max_items: 1
          aws_msk:
            nesting_mode: list
            block:
              attributes:
                aws_role_arn:
                  type: string
                  description: AWS role ARN to be used for Federated Identity authentication with MSK. Check the Pub/Sub docs for how to set up this role and the required permissions that need to be attached to it.
                  description_kind: plain
                  required: true
                cluster_arn:
                  type: string
                  description: ARN that uniquely identifies the MSK cluster.
                  description_kind: plain
                  required: true
                gcp_service_account:
                  type: string
                  description: The GCP service account to be used for Federated Identity authentication with MSK (via a 'AssumeRoleWithWebIdentity' call for the provided role). The 'awsRoleArn' must be set up with 'accounts.google.com:sub' equals to this service account number.
                  description_kind: plain
                  required: true
                topic:
                  type: string
                  description: The name of the MSK topic that Pub/Sub will import from.
                  description_kind: plain
                  required: true
              description: Settings for ingestion from Amazon Managed Streaming for Apache Kafka.
              description_kind: plain
            max_items: 1
          azure_event_hubs:
            nesting_mode: list
            block:
              attributes:
                client_id:
                  type: string
                  description: The Azure event hub client ID to use for ingestion.
                  description_kind: plain
                  optional: true
                event_hub:
                  type: string
                  description: The Azure event hub to ingest data from.
                  description_kind: plain
                  optional: true
                gcp_service_account:
                  type: string
                  description: The GCP service account to be used for Federated Identity authentication with Azure (via a 'AssumeRoleWithWebIdentity' call for the provided role).
                  description_kind: plain
                  optional: true
                namespace:
                  type: string
                  description: The Azure event hub namespace to ingest data from.
                  description_kind: plain
                  optional: true
                resource_group:
                  type: string
                  description: The name of the resource group within an Azure subscription.
                  description_kind: plain
                  optional: true
                subscription_id:
                  type: string
                  description: The Azure event hub subscription ID to use for ingestion.
                  description_kind: plain
                  optional: true
                tenant_id:
                  type: string
                  description: The Azure event hub tenant ID to use for ingestion.
                  description_kind: plain
                  optional: true
              description: Settings for ingestion from Azure Event Hubs.
              description_kind: plain
            max_items: 1
          cloud_storage:
            nesting_mode: list
            block:
              attributes:
                bucket:
                  type: string
                  description: 'Cloud Storage bucket. The bucket name must be without any prefix like "gs://". See the bucket naming requirements: https://cloud.google.com/storage/docs/buckets#naming.'
                  description_kind: plain
                  required: true
                match_glob:
                  type: string
                  description: 'Glob pattern used to match objects that will be ingested. If unset, all objects will be ingested. See the supported patterns: https://cloud.google.com/storage/docs/json_api/v1/objects/list#list-objects-and-prefixes-using-glob'
                  description_kind: plain
                  optional: true
                minimum_object_create_time:
                  type: string
                  description: The timestamp set in RFC3339 text format. If set, only objects with a larger or equal timestamp will be ingested. Unset by default, meaning all objects will be ingested.
                  description_kind: plain
                  optional: true
              block_types:
                avro_format:
                  nesting_mode: list
                  block:
                    description: Configuration for reading Cloud Storage data in Avro binary format. The bytes of each object will be set to the 'data' field of a Pub/Sub message.
                    description_kind: plain
                  max_items: 1
                pubsub_avro_format:
                  nesting_mode: list
                  block:
                    description: Configuration for reading Cloud Storage data written via Cloud Storage subscriptions(See https://cloud.google.com/pubsub/docs/cloudstorage). The data and attributes fields of the originally exported Pub/Sub message will be restored when publishing.
                    description_kind: plain
                  max_items: 1
                text_format:
                  nesting_mode: list
                  block:
                    attributes:
                      delimiter:
                        type: string
                        description: The delimiter to use when using the 'text' format. Each line of text as specified by the delimiter will be set to the 'data' field of a Pub/Sub message. When unset, '\n' is used.
                        description_kind: plain
                        optional: true
                    description: Configuration for reading Cloud Storage data in text format. Each line of text as specified by the delimiter will be set to the 'data' field of a Pub/Sub message.
                    description_kind: plain
                  max_items: 1
              description: Settings for ingestion from Cloud Storage.
              description_kind: plain
            max_items: 1
          confluent_cloud:
            nesting_mode: list
            block:
              attributes:
                bootstrap_server:
                  type: string
                  description: The Confluent Cloud bootstrap server. The format is url:port.
                  description_kind: plain
                  required: true
                cluster_id:
                  type: string
                  description: The Confluent Cloud cluster ID.
                  description_kind: plain
                  optional: true
                gcp_service_account:
                  type: string
                  description: The GCP service account to be used for Federated Identity authentication with Confluent Cloud.
                  description_kind: plain
                  required: true
                identity_pool_id:
                  type: string
                  description: Identity pool ID to be used for Federated Identity authentication with Confluent Cloud.
                  description_kind: plain
                  required: true
                topic:
                  type: string
                  description: Name of the Confluent Cloud topic that Pub/Sub will import from.
                  description_kind: plain
                  required: true
              description: Settings for ingestion from Confluent Cloud.
              description_kind: plain
            max_items: 1
          platform_logs_settings:
            nesting_mode: list
            block:
              attributes:
                severity:
                  type: string
                  description: 'The minimum severity level of Platform Logs that will be written. If unspecified, no Platform Logs will be written. Default value: "SEVERITY_UNSPECIFIED" Possible values: ["SEVERITY_UNSPECIFIED", "DISABLED", "DEBUG", "INFO", "WARNING", "ERROR"]'
                  description_kind: plain
                  optional: true
              description: Settings for Platform Logs regarding ingestion to Pub/Sub. If unset, no Platform Logs will be generated.'
              description_kind: plain
            max_items: 1
        description: Settings for ingestion from a data source into this topic.
        description_kind: plain
      max_items: 1
    message_storage_policy:
      nesting_mode: list
      block:
        attributes:
          allowed_persistence_regions:
            type:
            - set
            - string
            description: A list of IDs of GCP regions where messages that are published to the topic may be persisted in storage. Messages published by publishers running in non-allowed GCP regions (or running outside of GCP altogether) will be routed for storage in one of the allowed regions. An empty list means that no regions are allowed, and is not a valid configuration.
            description_kind: plain
            required: true
          enforce_in_transit:
            type: bool
            description: If true, 'allowedPersistenceRegions' is also used to enforce in-transit guarantees for messages. That is, Pub/Sub will fail topics.publish operations on this topic and subscribe operations on any subscription attached to this topic in any region that is not in 'allowedPersistenceRegions'.
            description_kind: plain
            optional: true
        description: Policy constraining the set of Google Cloud Platform regions where messages published to the topic may be stored. If not present, then no constraints are in effect.
        description_kind: plain
      max_items: 1
    message_transforms:
      nesting_mode: list
      block:
        attributes:
          disabled:
            type: bool
            description: 'Controls whether or not to use this transform. If not set or ''false'', the transform will be applied to messages. Default: ''true''.'
            description_kind: plain
            optional: true
        block_types:
          javascript_udf:
            nesting_mode: list
            block:
              attributes:
                code:
                  type: string
                  description: 'JavaScript code that contains a function ''function_name'' with the following signature: '''''' /** * Transforms a Pub/Sub message. * * @return {(Object<string, (string | Object<string, string>)>|null)} - To * filter a message, return ''null''. To transform a message return a map * with the following keys: *   - (required) ''data'' : {string} *   - (optional) ''attributes'' : {Object<string, string>} * Returning empty ''attributes'' will remove all attributes from the * message. * * @param  {(Object<string, (string | Object<string, string>)>} Pub/Sub * message. Keys: *   - (required) ''data'' : {string} *   - (required) ''attributes'' : {Object<string, string>} * * @param  {Object<string, any>} metadata - Pub/Sub message metadata. * Keys: *   - (required) ''message_id''  : {string} *   - (optional) ''publish_time'': {string} YYYY-MM-DDTHH:MM:SSZ format *   - (optional) ''ordering_key'': {string} */ function <function_name>(message, metadata) { } '''''''
                  description_kind: plain
                  required: true
                function_name:
                  type: string
                  description: Name of the JavaScript function that should be applied to Pub/Sub messages.
                  description_kind: plain
                  required: true
              description: Javascript User Defined Function. If multiple Javascript UDFs are specified on a resource, each one must have a unique 'function_name'.
              description_kind: plain
            max_items: 1
        description: Transforms to be applied to messages published to the topic. Transforms are applied in the order specified.
        description_kind: plain
    schema_settings:
      nesting_mode: list
      block:
        attributes:
          encoding:
            type: string
            description: 'The encoding of messages validated against schema. Default value: "ENCODING_UNSPECIFIED" Possible values: ["ENCODING_UNSPECIFIED", "JSON", "BINARY"]'
            description_kind: plain
            optional: true
          schema:
            type: string
            description: The name of the schema that messages published should be validated against. Format is projects/{project}/schemas/{schema}. The value of this field will be _deleted-schema_ if the schema has been deleted.
            description_kind: plain
            required: true
        description: Settings for validating messages published against a schema.
        description_kind: plain
      max_items: 1
    timeouts:
      nesting_mode: single
      block:
        attributes:
          create:
            type: string
            description_kind: plain
            optional: true
          delete:
            type: string
            description_kind: plain
            optional: true
          update:
            type: string
            description_kind: plain
            optional: true
        description_kind: plain
  description_kind: plain
