version: 0
block:
  attributes:
    create_time:
      type: string
      description: Timestamp the Engine was created at.
      description_kind: plain
      computed: true
    data_store_ids:
      type:
      - list
      - string
      description: The data stores associated with this engine. For SOLUTION_TYPE_RECOMMENDATION type of engines, they can only associate with at most one data store.
      description_kind: plain
      required: true
    display_name:
      type: string
      description: Required. The display name of the engine. Should be human readable. UTF-8 encoded string with limit of 1024 characters.
      description_kind: plain
      required: true
    engine_id:
      type: string
      description: Unique ID to use for Recommendation Engine.
      description_kind: plain
      required: true
    id:
      type: string
      description_kind: plain
      optional: true
      computed: true
    industry_vertical:
      type: string
      description: 'The industry vertical that the engine registers. The restriction of the Engine industry vertical is based on DataStore: If unspecified, default to GENERIC. Vertical on Engine has to match vertical of the DataStore liniked to the engine. Default value: "GENERIC" Possible values: ["GENERIC", "MEDIA"]'
      description_kind: plain
      optional: true
    location:
      type: string
      description: The geographic location where the data store should reside. The value can only be one of "global", "us" and "eu".
      description_kind: plain
      required: true
    name:
      type: string
      description: The unique full resource name of the recommendation engine. Values are of the format 'projects/{project}/locations/{location}/collections/{collection}/engines/{engine_id}'. This field must be a UTF-8 encoded string with a length limit of 1024 characters.
      description_kind: plain
      computed: true
    project:
      type: string
      description_kind: plain
      optional: true
      computed: true
    update_time:
      type: string
      description: Timestamp the Engine was last updated.
      description_kind: plain
      computed: true
  block_types:
    common_config:
      nesting_mode: list
      block:
        attributes:
          company_name:
            type: string
            description: The name of the company, business or entity that is associated with the engine. Setting this may help improve LLM related features.cd
            description_kind: plain
            optional: true
        description: Common config spec that specifies the metadata of the engine.
        description_kind: plain
      max_items: 1
    media_recommendation_engine_config:
      nesting_mode: list
      block:
        attributes:
          optimization_objective:
            type: string
            description: 'The optimization objective. e.g., ''cvr''. This field together with MediaRecommendationEngineConfig.type describes engine metadata to use to control engine training and serving. Currently supported values: ''ctr'', ''cvr''. If not specified, we choose default based on engine type. Default depends on type of recommendation: ''recommended-for-you'' => ''ctr'' ''others-you-may-like'' => ''ctr'''
            description_kind: plain
            optional: true
          training_state:
            type: string
            description: 'The training state that the engine is in (e.g. ''TRAINING'' or ''PAUSED''). Since part of the cost of running the service is frequency of training - this can be used to determine when to train engine in order to control cost. If not specified: the default value for ''CreateEngine'' method is ''TRAINING''. The default value for ''UpdateEngine'' method is to keep the state the same as before. Possible values: ["PAUSED", "TRAINING"]'
            description_kind: plain
            optional: true
          type:
            type: string
            description: 'The type of engine. e.g., ''recommended-for-you''. This field together with MediaRecommendationEngineConfig.optimizationObjective describes engine metadata to use to control engine training and serving. Currently supported values: ''recommended-for-you'', ''others-you-may-like'', ''more-like-this'', ''most-popular-items''.'
            description_kind: plain
            optional: true
        block_types:
          engine_features_config:
            nesting_mode: list
            block:
              block_types:
                most_popular_config:
                  nesting_mode: list
                  block:
                    attributes:
                      time_window_days:
                        type: number
                        description: The time window of which the engine is queried at training and prediction time. Positive integers only. The value translates to the last X days of events. Currently required for the 'most-popular-items' engine.
                        description_kind: plain
                        optional: true
                    description: Feature configurations that are required for creating a Most Popular engine.
                    description_kind: plain
                  max_items: 1
                recommended_for_you_config:
                  nesting_mode: list
                  block:
                    attributes:
                      context_event_type:
                        type: string
                        description: 'The type of event with which the engine is queried at prediction time. If set to ''generic'', only ''view-item'', ''media-play'',and ''media-complete'' will be used as ''context-event'' in engine training. If set to ''view-home-page'', ''view-home-page'' will also be used as ''context-events'' in addition to ''view-item'', ''media-play'', and ''media-complete''. Currently supported for the ''recommended-for-you'' engine. Currently supported values: ''view-home-page'', ''generic''.'
                        description_kind: plain
                        optional: true
                    description: Additional feature configurations for creating a 'recommended-for-you' engine.
                    description_kind: plain
                  max_items: 1
              description: More feature configs of the selected engine type.
              description_kind: plain
            max_items: 1
          optimization_objective_config:
            nesting_mode: list
            block:
              attributes:
                target_field:
                  type: string
                  description: 'The name of the field to target. Currently supported values: ''watch-percentage'', ''watch-time''.'
                  description_kind: plain
                  optional: true
                target_field_value_float:
                  type: number
                  description: The threshold to be applied to the target (e.g., 0.5).
                  description_kind: plain
                  optional: true
              description: Name and value of the custom threshold for cvr optimization_objective. For target_field 'watch-time', target_field_value must be an integer value indicating the media progress time in seconds between (0, 86400] (excludes 0, includes 86400) (e.g., 90). For target_field 'watch-percentage', the target_field_value must be a valid float value between (0, 1.0] (excludes 0, includes 1.0) (e.g., 0.5).
              description_kind: plain
            max_items: 1
        description: Configurations for a Media Recommendation Engine. Only applicable on the data stores with SOLUTION_TYPE_RECOMMENDATION solution type and MEDIA industry vertical.
        description_kind: plain
      max_items: 1
    timeouts:
      nesting_mode: single
      block:
        attributes:
          create:
            type: string
            description_kind: plain
            optional: true
          delete:
            type: string
            description_kind: plain
            optional: true
          update:
            type: string
            description_kind: plain
            optional: true
        description_kind: plain
  description_kind: plain
