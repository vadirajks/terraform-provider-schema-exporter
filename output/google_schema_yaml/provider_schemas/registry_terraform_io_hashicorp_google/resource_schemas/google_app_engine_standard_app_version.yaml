version: 0
block:
  attributes:
    app_engine_apis:
      type: bool
      description: Allows App Engine second generation runtimes to access the legacy bundled services.
      description_kind: plain
      optional: true
    delete_service_on_destroy:
      type: bool
      description: If set to 'true', the service will be deleted if it is the last version.
      description_kind: plain
      optional: true
    env_variables:
      type:
      - map
      - string
      description: Environment variables available to the application.
      description_kind: plain
      optional: true
    id:
      type: string
      description_kind: plain
      optional: true
      computed: true
    inbound_services:
      type:
      - set
      - string
      description: 'A list of the types of messages that this application is able to receive. Possible values: ["INBOUND_SERVICE_MAIL", "INBOUND_SERVICE_MAIL_BOUNCE", "INBOUND_SERVICE_XMPP_ERROR", "INBOUND_SERVICE_XMPP_MESSAGE", "INBOUND_SERVICE_XMPP_SUBSCRIBE", "INBOUND_SERVICE_XMPP_PRESENCE", "INBOUND_SERVICE_CHANNEL_PRESENCE", "INBOUND_SERVICE_WARMUP"]'
      description_kind: plain
      optional: true
    instance_class:
      type: string
      description: 'Instance class that is used to run this version. Valid values are AutomaticScaling: F1, F2, F4, F4_1G BasicScaling or ManualScaling: B1, B2, B4, B4_1G, B8 Defaults to F1 for AutomaticScaling and B2 for ManualScaling and BasicScaling. If no scaling is specified, AutomaticScaling is chosen.'
      description_kind: plain
      optional: true
      computed: true
    name:
      type: string
      description: Full path to the Version resource in the API. Example, "v1".
      description_kind: plain
      computed: true
    noop_on_destroy:
      type: bool
      description: If set to 'true', the application version will not be deleted.
      description_kind: plain
      optional: true
    project:
      type: string
      description_kind: plain
      optional: true
      computed: true
    runtime:
      type: string
      description: Desired runtime. Example python27.
      description_kind: plain
      required: true
    runtime_api_version:
      type: string
      description: The version of the API in the given runtime environment. Please see the app.yaml reference for valid values at 'https://cloud.google.com/appengine/docs/standard/<language>/config/appref'\ Substitute '<language>' with 'python', 'java', 'php', 'ruby', 'go' or 'nodejs'.
      description_kind: plain
      optional: true
    service:
      type: string
      description: AppEngine service resource
      description_kind: plain
      required: true
    service_account:
      type: string
      description: The identity that the deployed version will run as. Admin API will use the App Engine Appspot service account as default if this field is neither provided in app.yaml file nor through CLI flag.
      description_kind: plain
      optional: true
      computed: true
    threadsafe:
      type: bool
      description: Whether multiple requests can be dispatched to this version at once.
      description_kind: plain
      optional: true
    version_id:
      type: string
      description: Relative name of the version within the service. For example, 'v1'. Version names can contain only lowercase letters, numbers, or hyphens. Reserved names,"default", "latest", and any name with the prefix "ah-".
      description_kind: plain
      optional: true
  block_types:
    automatic_scaling:
      nesting_mode: list
      block:
        attributes:
          max_concurrent_requests:
            type: number
            description: Number of concurrent requests an automatic scaling instance can accept before the scheduler spawns a new instance. Defaults to a runtime-specific value.
            description_kind: plain
            optional: true
          max_idle_instances:
            type: number
            description: Maximum number of idle instances that should be maintained for this version.
            description_kind: plain
            optional: true
          max_pending_latency:
            type: string
            description: 'Maximum amount of time that a request should wait in the pending queue before starting a new instance to handle it. A duration in seconds with up to nine fractional digits, terminated by ''s''. Example: "3.5s".'
            description_kind: plain
            optional: true
          min_idle_instances:
            type: number
            description: Minimum number of idle instances that should be maintained for this version. Only applicable for the default version of a service.
            description_kind: plain
            optional: true
          min_pending_latency:
            type: string
            description: 'Minimum amount of time a request should wait in the pending queue before starting a new instance to handle it. A duration in seconds with up to nine fractional digits, terminated by ''s''. Example: "3.5s".'
            description_kind: plain
            optional: true
        block_types:
          standard_scheduler_settings:
            nesting_mode: list
            block:
              attributes:
                max_instances:
                  type: number
                  description: Maximum number of instances to run for this version. Set to zero to disable maxInstances configuration. **Note:** Starting from March 2025, App Engine sets the maxInstances default for standard environment deployments to 20. This change doesn't impact existing apps. To override the default, specify a new value between 0 and 2147483647, and deploy a new version or redeploy over an existing version. To disable the maxInstances default configuration setting, specify the maximum permitted value 2147483647.
                  description_kind: plain
                  optional: true
                  computed: true
                min_instances:
                  type: number
                  description: Minimum number of instances to run for this version. Set to zero to disable minInstances configuration.
                  description_kind: plain
                  optional: true
                target_cpu_utilization:
                  type: number
                  description: Target CPU utilization ratio to maintain when scaling. Should be a value in the range [0.50, 0.95], zero, or a negative value.
                  description_kind: plain
                  optional: true
                target_throughput_utilization:
                  type: number
                  description: Target throughput utilization ratio to maintain when scaling. Should be a value in the range [0.50, 0.95], zero, or a negative value.
                  description_kind: plain
                  optional: true
              description: Scheduler settings for standard environment.
              description_kind: plain
            max_items: 1
        description: Automatic scaling is based on request rate, response latencies, and other application metrics.
        description_kind: plain
      max_items: 1
    basic_scaling:
      nesting_mode: list
      block:
        attributes:
          idle_timeout:
            type: string
            description: 'Duration of time after the last request that an instance must wait before the instance is shut down. A duration in seconds with up to nine fractional digits, terminated by ''s''. Example: "3.5s". Defaults to 900s.'
            description_kind: plain
            optional: true
          max_instances:
            type: number
            description: Maximum number of instances to create for this version. Must be in the range [1.0, 200.0].
            description_kind: plain
            required: true
        description: Basic scaling creates instances when your application receives requests. Each instance will be shut down when the application becomes idle. Basic scaling is ideal for work that is intermittent or driven by user activity.
        description_kind: plain
      max_items: 1
    deployment:
      nesting_mode: list
      block:
        block_types:
          files:
            nesting_mode: set
            block:
              attributes:
                name:
                  type: string
                  description_kind: plain
                  required: true
                sha1_sum:
                  type: string
                  description: SHA1 checksum of the file
                  description_kind: plain
                  optional: true
                source_url:
                  type: string
                  description: Source URL
                  description_kind: plain
                  required: true
              description: Manifest of the files stored in Google Cloud Storage that are included as part of this version. All files must be readable using the credentials supplied with this call.
              description_kind: plain
          zip:
            nesting_mode: list
            block:
              attributes:
                files_count:
                  type: number
                  description: files count
                  description_kind: plain
                  optional: true
                source_url:
                  type: string
                  description: Source URL
                  description_kind: plain
                  required: true
              description: Zip File
              description_kind: plain
            max_items: 1
        description: Code and application artifacts that make up this version.
        description_kind: plain
      min_items: 1
      max_items: 1
    entrypoint:
      nesting_mode: list
      block:
        attributes:
          shell:
            type: string
            description: The format should be a shell command that can be fed to bash -c.
            description_kind: plain
            required: true
        description: The entrypoint for the application.
        description_kind: plain
      min_items: 1
      max_items: 1
    handlers:
      nesting_mode: list
      block:
        attributes:
          auth_fail_action:
            type: string
            description: 'Actions to take when the user is not logged in. Possible values: ["AUTH_FAIL_ACTION_REDIRECT", "AUTH_FAIL_ACTION_UNAUTHORIZED"]'
            description_kind: plain
            optional: true
          login:
            type: string
            description: 'Methods to restrict access to a URL based on login status. Possible values: ["LOGIN_OPTIONAL", "LOGIN_ADMIN", "LOGIN_REQUIRED"]'
            description_kind: plain
            optional: true
          redirect_http_response_code:
            type: string
            description: '30x code to use when performing redirects for the secure field. Possible values: ["REDIRECT_HTTP_RESPONSE_CODE_301", "REDIRECT_HTTP_RESPONSE_CODE_302", "REDIRECT_HTTP_RESPONSE_CODE_303", "REDIRECT_HTTP_RESPONSE_CODE_307"]'
            description_kind: plain
            optional: true
          security_level:
            type: string
            description: 'Security (HTTPS) enforcement for this URL. Possible values: ["SECURE_DEFAULT", "SECURE_NEVER", "SECURE_OPTIONAL", "SECURE_ALWAYS"]'
            description_kind: plain
            optional: true
          url_regex:
            type: string
            description: URL prefix. Uses regular expression syntax, which means regexp special characters must be escaped, but should not contain groupings. All URLs that begin with this prefix are handled by this handler, using the portion of the URL after the prefix as part of the file path.
            description_kind: plain
            optional: true
        block_types:
          script:
            nesting_mode: list
            block:
              attributes:
                script_path:
                  type: string
                  description: Path to the script from the application root directory.
                  description_kind: plain
                  required: true
              description: Executes a script to handle the requests that match this URL pattern. Only the auto value is supported for Node.js in the App Engine standard environment, for example "script:" "auto".
              description_kind: plain
            max_items: 1
          static_files:
            nesting_mode: list
            block:
              attributes:
                application_readable:
                  type: bool
                  description: Whether files should also be uploaded as code data. By default, files declared in static file handlers are uploaded as static data and are only served to end users; they cannot be read by the application. If enabled, uploads are charged against both your code and static data storage resource quotas.
                  description_kind: plain
                  optional: true
                expiration:
                  type: string
                  description: Time a static file served by this handler should be cached by web proxies and browsers. A duration in seconds with up to nine fractional digits, terminated by 's'. Example "3.5s".
                  description_kind: plain
                  optional: true
                http_headers:
                  type:
                  - map
                  - string
                  description: HTTP headers to use for all responses from these URLs. An object containing a list of "key:value" value pairs.".
                  description_kind: plain
                  optional: true
                mime_type:
                  type: string
                  description: MIME type used to serve all files served by this handler. Defaults to file-specific MIME types, which are derived from each file's filename extension.
                  description_kind: plain
                  optional: true
                path:
                  type: string
                  description: Path to the static files matched by the URL pattern, from the application root directory. The path can refer to text matched in groupings in the URL pattern.
                  description_kind: plain
                  optional: true
                require_matching_file:
                  type: bool
                  description: Whether this handler should match the request if the file referenced by the handler does not exist.
                  description_kind: plain
                  optional: true
                upload_path_regex:
                  type: string
                  description: Regular expression that matches the file paths for all files that should be referenced by this handler.
                  description_kind: plain
                  optional: true
              description: Files served directly to the user for a given URL, such as images, CSS stylesheets, or JavaScript source files. Static file handlers describe which files in the application directory are static files, and which URLs serve them.
              description_kind: plain
            max_items: 1
        description: An ordered list of URL-matching patterns that should be applied to incoming requests. The first matching URL handles the request and other request handlers are not attempted.
        description_kind: plain
    libraries:
      nesting_mode: list
      block:
        attributes:
          name:
            type: string
            description: Name of the library. Example "django".
            description_kind: plain
            optional: true
          version:
            type: string
            description: Version of the library to select, or "latest".
            description_kind: plain
            optional: true
        description: Configuration for third-party Python runtime libraries that are required by the application.
        description_kind: plain
    manual_scaling:
      nesting_mode: list
      block:
        attributes:
          instances:
            type: number
            description: Number of instances to assign to the service at the start. **Note:** When managing the number of instances at runtime through the App Engine Admin API or the (now deprecated) Python 2 Modules API set_num_instances() you must use 'lifecycle.ignore_changes = ["manual_scaling"[0].instances]' to prevent drift detection.
            description_kind: plain
            required: true
        description: A service with manual scaling runs continuously, allowing you to perform complex initialization and rely on the state of its memory over time.
        description_kind: plain
      max_items: 1
    timeouts:
      nesting_mode: single
      block:
        attributes:
          create:
            type: string
            description_kind: plain
            optional: true
          delete:
            type: string
            description_kind: plain
            optional: true
          update:
            type: string
            description_kind: plain
            optional: true
        description_kind: plain
    vpc_access_connector:
      nesting_mode: list
      block:
        attributes:
          egress_setting:
            type: string
            description: The egress setting for the connector, controlling what traffic is diverted through it.
            description_kind: plain
            optional: true
          name:
            type: string
            description: Full Serverless VPC Access Connector name e.g. /projects/my-project/locations/us-central1/connectors/c1.
            description_kind: plain
            required: true
        description: Enables VPC connectivity for standard apps.
        description_kind: plain
      max_items: 1
  description_kind: plain
