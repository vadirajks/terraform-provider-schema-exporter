# **Terraform Provider Schema Exporter**

Python scripts to parse the output of terraform providers schema \-json into organized and human-readable .tf, .yaml, and .json file trees.

## **What is this?**

The terraform providers schema \-json command is a powerful way to get the *entire* schema for one or more providers. However, its output is a single, massive JSON file (often 20MB+) that is impossible to navigate.

These scripts solve that problem. They read the giant schema.json file and split it into thousands of individual files, organized by provider and schema type (resource, data source, etc.).

This creates a human-readable "schema library" that you can browse, search, and use as a reference.

### **Core Features**

* **Generates .tf Syntax:** Creates .tf files that look like Terraform code, making them easy to read.  
* **Sorts Arguments:** .tf files are sorted with **(Required)** arguments at the top of each block.  
* **Labels Blocks:** Nested blocks are labeled as **(Required)** or **(Optional)**.  
* **Cleans Descriptions:** All \\n and \\t characters are stripped from descriptions for clean YAML and JSON output.  
* **Handles All Schemas:** Correctly processes resource\_schemas, data\_source\_schemas, resource\_identity\_schemas, and all other schema types.

## **Project Structure**

.

| ├── all.sh                  \# \<-- Main script to run everything├── extract\_schema\_json.py  \#├── extract\_schema\_tf.py    \# \<-- Core Python scripts├── extract\_schema\_yaml.py  \#├── main.tf                 \# \<-- Your provider definitions├── output/                 \# \<-- All generated files land here│   ├── aws\_schema\_json/│   ├── aws\_schema\_tf/│   ├── aws\_schema\_yaml/│   ├── azurerm\_schema\_json/│   ├── ...├── README.md├── schema.json             \# \<-- Generated by 'all.sh'├── split\_schema\_json.sh    \#├── split\_schema\_tf.sh      \# \<-- Helper scripts└── split\_schema\_yaml.sh    \# |
| :---- |

## **How to Use**

### **Prerequisites**

1. **Terraform:** Must be installed.  
2. **Python 3:** Must be installed.  
3. **PyYAML:** The only Python dependency.

| pip install pyyaml |
| :---- |

### **Step 1: Configure Providers**

Edit the main.tf file to include all the providers you want to export. You do not need to specify a version.

| main.tf |
| :---- |

| terraform {  required\_providers {    google \= {      source  \= "hashicorp/google"    }    azurerm \= {      source  \= "hashicorp/azurerm"    }    aws \= {      source  \= "hashicorp/aws"    }  }} |
| :---- |

### **Step 2: Configure Helper Scripts**

The split\_\*.sh scripts tell the Python scripts which providers to extract from the main schema.json. If you added a new provider to main.tf (e.g., kubernetes), you must also add it to all three split\_\*.sh scripts.

split\_schema\_tf.sh **(Example)**

| python3 extract\_schema\_tf.py \\  \--provider google \\  \--schema-json schema.json \\  \--base-dir ./outputpython3 extract\_schema\_tf.py \\  \--provider aws \\  \--schema-json schema.json \\  \--base-dir ./outputpython3 extract\_schema\_tf.py \\  \--provider azurerm \\  \--schema-json schema.json \\  \--base-dir ./output |
| :---- |

### **Step 3: Run the Exporter**

The all.sh script automates the entire process.

1. Make the script executable:

| chmod \+x all.sh |
| :---- |

2. Run the script:

| ./all.sh |
| :---- |

This script will:

1. Run terraform init to download the providers.  
2. Run terraform providers schema \-json \> schema.json to create the master schema file.  
3. Execute all three split\_\*.sh scripts to generate the output directories.

### **Step 4: Browse the Output**

You can now browse the generated schemas in the output/ directory.

The tree structure will look like this:

| output/├── aws\_schema\_tf│   └── provider\_schemas│       └── registry\_terraform\_io\_hashicorp\_aws│           ├── data\_source\_schemas│           │   ├── aws\_instance.tf│           │   └── ...│           ├── provider│           │   └── aws.tf│           ├── resource\_identity\_schemas│           │   ├── aws\_iam\_role.tf│           │   └── ...│           └── resource\_schemas│               ├── aws\_instance.tf│               └── ...├── azurerm\_schema\_tf│   └── ...└── google\_schema\_tf    └── ... |
| :---- |

## **Example Output**

The generated .tf files are formatted for readability, with required arguments and blocks listed first.

**Example: output/aws\_schema\_tf/.../resource\_schemas/aws\_instance.tf**

| resource "aws\_instance" "name" {  // Required arguments  ami \= string (Required)  instance\_type \= string (Required)  // Optional arguments  associate\_public\_ip\_address \= bool (Optional)  availability\_zone \= string (Optional, Computed)  cpu\_core\_count \= number (Optional, Computed)  // ...  capacity\_reservation\_specification block "list" (Optional) {    // Optional arguments    capacity\_reservation\_preference \= string (Optional)    capacity\_reservation\_target block "list" (Optional) {      // Optional arguments      capacity\_reservation\_id \= string (Optional)      capacity\_reservation\_resource\_group\_arn \= string (Optional)    }  }  ebs\_block\_device block "set" (Optional, Computed) {    // Required arguments    device\_name \= string (Required)    // ...  }  // ...  // Computed arguments  arn \= string (Computed)  id \= string (Computed)  primary\_network\_interface\_id \= string (Computed)  // ...} |
| :---- |

